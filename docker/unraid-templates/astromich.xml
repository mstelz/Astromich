<?xml version="1.0"?>
<Container version="2">
  <Name>Astromich</Name>
  <Repository>astromich:latest</Repository>
  <Registry>https://hub.docker.com/</Registry>
  <Network>bridge</Network>
  <WebUI>http://[IP]:[PORT:2284]/</WebUI>
  <Icon>https://raw.githubusercontent.com/your-repo/astromich/main/assets/images/generated-icon.png</Icon>
  <TemplateURL>https://raw.githubusercontent.com/your-repo/astromich/main/docker/unraid-templates/astromich.xml</TemplateURL>
  <Beta>False</Beta>
  <Category>MediaApp:Photos MediaApp:Other Tools:</Category>
  <Date>2025-07-06</Date>
  <Changes>
    ### v1.1.0
    - SECURITY: Comprehensive security fixes and secret management
    - FEAT: Complete Docker containerization with multi-stage builds
    - FEAT: PostgreSQL support for production environments
    - FEAT: Worker process management with enable/disable functionality
    - FIX: Thumbnail proxy endpoint 500 errors resolved
    - REFACTOR: Project renamed from AstroRep to Astromich
    - DOCS: Enhanced security documentation and deployment guides
    
    ### v1.0.0
    - Initial release
    - Astrophotography image management
    - Plate solving integration
    - Equipment tracking
    - Immich synchronization
  </Changes>
  <Overview>
    Astromich is a comprehensive astrophotography image management and analysis application that bridges the gap between your astrophotography sessions and organized digital asset management. It provides seamless integration with Immich for photo management, advanced plate solving through Astrometry.net, and detailed equipment tracking to help you organize and analyze your celestial captures.
  </Overview>
  
  <Requires>PostgreSQL</Requires>
  
  <Description>
    Astromich is a comprehensive astrophotography image management and analysis application. It provides automatic synchronization with Immich, plate solving capabilities through Astrometry.net, equipment tracking, and detailed image metadata management. Perfect for organizing and analyzing your astrophotography collection.
    
    Features:
    - Automatic Immich synchronization
    - Plate solving with Astrometry.net
    - Equipment and settings tracking
    - Image tagging and filtering
    - Real-time progress updates
    - Dark theme optimized for astronomy
    - Secure configuration management
    
    Requirements:
    - PostgreSQL database (REQUIRED - install any PostgreSQL template first with database name 'astromich', username 'astromich', and a strong password)
    - Optional: Immich server for photo management
    - Optional: Astrometry.net API key for plate solving
    
    Security Notes:
    - API keys are stored securely as environment variables
    - No secrets are embedded in the container image
    - Configuration can also be managed via the admin web interface
    - Always use strong, unique passwords for database connections
  </Description>
  
  <Config Name="WebUI Port" Target="5000" Default="2284" Mode="tcp" Description="Port for web interface" Type="Port" Display="always" Required="true" Mask="false">2284</Config>
  
  <Config Name="Config Directory" Target="/app/config" Default="/mnt/user/appdata/astromich/config" Mode="rw" Description="Configuration storage" Type="Path" Display="always" Required="true" Mask="false">/mnt/user/appdata/astromich/config</Config>
  
  <Config Name="Logs Directory" Target="/app/logs" Default="/mnt/user/appdata/astromich/logs" Mode="rw" Description="Application logs storage" Type="Path" Display="always" Required="true" Mask="false">/mnt/user/appdata/astromich/logs</Config>
  
  <Config Name="Sidecar Directory" Target="/app/sidecars" Default="/mnt/user/appdata/astromich/sidecars" Mode="rw" Description="XMP sidecar files storage" Type="Path" Display="always" Required="true" Mask="false">/mnt/user/appdata/astromich/sidecars</Config>
  
  <Config Name="Database URL" Target="DATABASE_URL" Default="postgresql://astromich:CHANGE_ME@postgres:5432/astromich" Mode="" Description="PostgreSQL connection string (ensure PostgreSQL container is installed first)" Type="Variable" Display="always" Required="true" Mask="true">postgresql://astromich:CHANGE_ME@postgres:5432/astromich</Config>
  
  <Config Name="Node Environment" Target="NODE_ENV" Default="production" Mode="" Description="Application environment" Type="Variable" Display="advanced" Required="false" Mask="false">production</Config>
  
  <Config Name="Immich URL" Target="IMMICH_URL" Default="" Mode="" Description="Immich server URL (e.g., http://immich:2283)" Type="Variable" Display="always" Required="false" Mask="false"></Config>
  
  <Config Name="Immich API Key" Target="IMMICH_API_KEY" Default="" Mode="" Description="Immich API key for integration (can also be configured via admin interface)" Type="Variable" Display="always" Required="false" Mask="true"></Config>
  
  <Config Name="Astrometry API Key" Target="ASTROMETRY_API_KEY" Default="" Mode="" Description="Astrometry.net API key for plate solving (can also be configured via admin interface)" Type="Variable" Display="always" Required="false" Mask="true"></Config>
  
  <Config Name="Enable Plate Solving" Target="ENABLE_PLATE_SOLVING" Default="true" Mode="" Description="Enable background plate solving worker" Type="Variable" Display="always" Required="false" Mask="false">true</Config>
  
  <Config Name="Max Plate Solve Jobs" Target="PLATE_SOLVE_MAX_CONCURRENT" Default="3" Mode="" Description="Maximum concurrent plate solving jobs" Type="Variable" Display="advanced" Required="false" Mask="false">3</Config>
  
  <Config Name="XMP Sidecar Path" Target="XMP_SIDECAR_PATH" Default="/app/sidecars" Mode="" Description="Directory for XMP sidecar files" Type="Variable" Display="advanced" Required="false" Mask="false">/app/sidecars</Config>
  
</Container>
